# ===== CLARITY LOOP BACKEND ENVIRONMENT CONFIGURATION =====
# Copy this file to .env and configure your local development environment

# ===== APPLICATION SETTINGS =====
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=debug
API_VERSION=v1
HOST=0.0.0.0
PORT=8080
RELOAD=true

# ===== SECURITY SETTINGS =====
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
PASSWORD_HASH_ROUNDS=12

# ===== GOOGLE CLOUD PLATFORM =====
GCP_PROJECT_ID=clarity-loop-dev
GCP_REGION=us-central1
GOOGLE_APPLICATION_CREDENTIALS=./credentials/service-account.json

# ===== FIREBASE CONFIGURATION =====
FIREBASE_PROJECT_ID=clarity-loop-dev
FIREBASE_CREDENTIALS_PATH=./credentials/firebase-admin.json
FIREBASE_AUTH_EMULATOR_HOST=localhost:9099

# ===== FIRESTORE DATABASE =====
FIRESTORE_EMULATOR_HOST=localhost:8080
FIRESTORE_DATABASE_ID=(default)

# ===== GOOGLE CLOUD STORAGE =====
GCS_BUCKET_NAME=clarity-loop-storage-dev
GCS_MODELS_BUCKET=clarity-models-dev
GCS_UPLOADS_BUCKET=clarity-uploads-dev

# ===== GOOGLE CLOUD PUB/SUB =====
PUBSUB_EMULATOR_HOST=localhost:8085
PUBSUB_HEALTH_DATA_TOPIC=health-data-processing
PUBSUB_ML_PREDICTIONS_TOPIC=ml-predictions
PUBSUB_INSIGHTS_TOPIC=user-insights

# ===== REDIS CONFIGURATION =====
REDIS_URL=redis://localhost:6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_SSL=false
REDIS_DECODE_RESPONSES=true

# ===== ML MODEL CONFIGURATION =====
# PAT (Pretrained Actigraphy Transformer) Settings
PAT_MODEL_PATH=./models/pat-large-v1.2
PAT_MODEL_DEVICE=cpu
PAT_BATCH_SIZE=32
PAT_SEQUENCE_LENGTH=10080
PAT_PATCH_SIZE=18
PAT_EMBED_DIM=128
PAT_NUM_HEADS=8
PAT_NUM_LAYERS=12
PAT_DROPOUT=0.1

# Model Training Settings
TRAIN_MASK_RATIO=0.9
TRAIN_LEARNING_RATE=1e-4
TRAIN_WEIGHT_DECAY=0.01
TRAIN_WARMUP_STEPS=1000
TRAIN_MAX_STEPS=50000
TRAIN_BATCH_SIZE=256
TRAIN_GRADIENT_CLIP=1.0

# ===== GOOGLE GEMINI AI =====
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_TEMPERATURE=0.3
GEMINI_MAX_TOKENS=1024
GEMINI_TOP_P=0.8
GEMINI_TOP_K=40
GEMINI_SAFETY_THRESHOLD=BLOCK_MEDIUM_AND_ABOVE

# ===== VERTEX AI CONFIGURATION =====
VERTEX_AI_LOCATION=us-central1
VERTEX_AI_ENDPOINT_ID=your-endpoint-id
VERTEX_AI_MODEL_ID=your-model-id

# ===== MONITORING & OBSERVABILITY =====
PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
STRUCTLOG_FORMAT=json
ENABLE_TRACING=true
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ===== HEALTH DATA PROCESSING =====
MAX_UPLOAD_SIZE_MB=100
ALLOWED_FILE_TYPES=json,csv,parquet
DATA_RETENTION_DAYS=2555  # 7 years for HIPAA compliance
ENABLE_DATA_VALIDATION=true
ENABLE_PHI_SCRUBBING=true

# ===== API RATE LIMITING =====
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_STORAGE=redis

# ===== CORS CONFIGURATION =====
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8080"]
CORS_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_HEADERS=["Authorization", "Content-Type", "X-Requested-With"]

# ===== DATABASE CONNECTIONS =====
# PostgreSQL (if using for analytics)
POSTGRES_URL=postgresql://clarity:password@localhost:5432/clarity_analytics
POSTGRES_POOL_SIZE=20
POSTGRES_MAX_OVERFLOW=0

# ===== EXTERNAL INTEGRATIONS =====
# Apple HealthKit Validation (for production)
APPLE_TEAM_ID=your-apple-team-id
APPLE_APP_ID=com.clarity.healthapp

# Research Data Sources
ACTIGRAPHY_DATA_SOURCE=synthetic  # or 'real' for production
SYNTHETIC_USER_COUNT=1000
SYNTHETIC_DAYS_PER_USER=30

# ===== FEATURE FLAGS =====
ENABLE_EXPLAINABILITY_API=true
ENABLE_SYNTHETIC_DATA_GENERATION=true
ENABLE_REAL_TIME_INSIGHTS=true
ENABLE_BATCH_PROCESSING=true
ENABLE_CLINICAL_DASHBOARD=true

# ===== DEVELOPMENT TOOLS =====
ENABLE_HOT_RELOAD=true
ENABLE_DEBUG_TOOLBAR=true
ENABLE_PROFILING=false
JUPYTER_PORT=8888
JUPYTER_TOKEN=

# ===== TESTING CONFIGURATION =====
TESTING=false
TEST_DATABASE_URL=sqlite:///./test.db
MOCK_EXTERNAL_APIS=true
ENABLE_TEST_FIXTURES=true

# ===== PERFORMANCE SETTINGS =====
WORKERS=4
MAX_WORKERS=8
WORKER_TIMEOUT=120
KEEP_ALIVE_TIMEOUT=5
BACKLOG=2048

# ===== CLOUD RUN CONFIGURATION (Production) =====
CLOUD_RUN_SERVICE_NAME=clarity-loop-backend
CLOUD_RUN_REGION=us-central1
CLOUD_RUN_CPU=2
CLOUD_RUN_MEMORY=4Gi
CLOUD_RUN_CONCURRENCY=1000
CLOUD_RUN_TIMEOUT=300
CLOUD_RUN_MAX_INSTANCES=100

# API Keys (Required to enable respective provider)
ANTHROPIC_API_KEY="your_anthropic_api_key_here"       # Required: Format: sk-ant-api03-...
PERPLEXITY_API_KEY="your_perplexity_api_key_here"     # Optional: Format: pplx-...
OPENAI_API_KEY="your_openai_api_key_here"             # Optional, for OpenAI/OpenRouter models. Format: sk-proj-...
GOOGLE_API_KEY="your_google_api_key_here"             # Optional, for Google Gemini models.
MISTRAL_API_KEY="your_mistral_key_here"               # Optional, for Mistral AI models.
XAI_API_KEY="YOUR_XAI_KEY_HERE"                       # Optional, for xAI AI models.
AZURE_OPENAI_API_KEY="your_azure_key_here"            # Optional, for Azure OpenAI models (requires endpoint in .taskmasterconfig).
OLLAMA_API_KEY="your_ollama_api_key_here"             # Optional: For remote Ollama servers that require authentication.