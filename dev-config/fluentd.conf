# Fluentd configuration for development log aggregation
<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<source>
  @type tail
  path /var/log/clarity/*.log
  pos_file /var/log/fluentd/clarity.log.pos
  tag clarity.logs
  format json
  time_key timestamp
  time_format %Y-%m-%dT%H:%M:%S
</source>

<filter clarity.**>
  @type record_transformer
  <record>
    service clarity-backend
    environment development
  </record>
</filter>

<match clarity.**>
  @type stdout
  @id output_stdout
</match>

<match *.**>
  @type stdout
  @id output_stdout_all
</match>