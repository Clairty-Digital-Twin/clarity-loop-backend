{
  "family": "clarity-backend",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "4096",
  "memory": "16384",
  "containerDefinitions": [
    {
      "name": "clarity-backend",
      "image": "124355672559.dkr.ecr.us-east-1.amazonaws.com/clarity-backend:auth-fix-v3-20250614-103040",
      "portMappings": [
        {
          "containerPort": 8000,
          "protocol": "tcp"
        }
      ],
      "essential": true,
      "environment": [
        {"name": "PORT", "value": "8000"},
        {"name": "ENVIRONMENT", "value": "production"},
        {"name": "ENABLE_AUTH", "value": "true"},
        {"name": "CORS_ALLOWED_ORIGINS", "value": "https://api.clarity.health,http://localhost:3000,http://localhost:8000,https://clarity.health"},
        {"name": "CORS_ALLOW_CREDENTIALS", "value": "true"},
        {"name": "AWS_REGION", "value": "us-east-1"},
        {"name": "COGNITO_REGION", "value": "us-east-1"},
        {"name": "COGNITO_USER_POOL_ID", "value": "us-east-1_efXaR5EcP"},
        {"name": "COGNITO_CLIENT_ID", "value": "7sm7ckrkovg78b03n1595euc71"},
        {"name": "DYNAMODB_TABLE_NAME", "value": "clarity-health-data"},
        {"name": "DYNAMODB_INSIGHTS_TABLE", "value": "clarity-ai-insights"},
        {"name": "DYNAMODB_USERS_TABLE", "value": "clarity-users"},
        {"name": "DYNAMODB_SESSIONS_TABLE", "value": "clarity-user-sessions"},
        {"name": "S3_BUCKET_NAME", "value": "clarity-health-data-storage"},
        {"name": "SQS_QUEUE_NAME", "value": "clarity-insights-queue"},
        {"name": "SNS_TOPIC_ARN", "value": "arn:aws:sns:us-east-1:124355672559:clarity-insights-topic"},
        {"name": "LOG_LEVEL", "value": "INFO"}
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/clarity-backend",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "ecs"
        }
      },
      "healthCheck": {
        "command": ["CMD-SHELL", "curl -f http://localhost:8000/health || exit 1"],
        "interval": 30,
        "timeout": 5,
        "retries": 3
      }
    }
  ],
  "executionRoleArn": "arn:aws:iam::124355672559:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::124355672559:role/clarity-backend-task-role"
}